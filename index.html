<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å¤§å­¦ç”Ÿåƒé¥­é€‰æ‹©å›°éš¾ç—‡æ‹¯æ•‘å™¨</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #fff5e6;
        font-family: "Comic Sans MS", "Marker Felt", "å¾®è½¯é›…é»‘", sans-serif;
      }
      .header {
        background-color: #ff9966;
        color: white;
        padding: 20px 0;
        border-radius: 0 0 20px 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }
      .form-container {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }
      .result-container {
        display: none;
        background-color: #e6f7ff;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }
      .progress-container {
        display: none;
        margin: 20px 0;
      }
      .progress-bar {
        background-color: #ff9966;
      }
      .funny-icon {
        font-size: 2rem;
        margin: 0 10px;
      }
      .mood-selector img {
        width: 60px;
        height: 60px;
        margin: 5px;
        cursor: pointer;
        transition: all 0.3s;
        border-radius: 50%;
      }
      .mood-selector img:hover,
      .mood-selector img.selected {
        transform: scale(1.1);
        box-shadow: 0 0 10px #ff9966;
      }
      .funny-input {
        border-radius: 50px;
        padding: 10px 20px;
        border: 2px dashed #ff9966;
      }
      .funny-btn {
        background-color: #ff9966;
        color: white;
        border: none;
        border-radius: 50px;
        padding: 12px 30px;
        font-weight: bold;
        transition: all 0.3s;
      }
      .funny-btn:hover {
        background-color: #ff7733;
        transform: scale(1.05);
      }
      .result-title {
        color: #ff7733;
        font-weight: bold;
        margin-bottom: 20px;
      }
      .result-food {
        font-size: 2rem;
        font-weight: bold;
        color: #ff5500;
        margin: 20px 0;
      }
      .funny-fact {
        font-style: italic;
        color: #666;
        margin-top: 10px;
      }
      .emoji {
        font-size: 1.5rem;
      }

      /* æ”¹è¿›æ»‘å—æ ·å¼ */
      .form-range::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background: #ff9966;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s;
      }

      .form-range::-webkit-slider-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      }

      .form-range::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #ff9966;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s;
      }

      .form-range::-moz-range-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      }

      .form-range::-webkit-slider-runnable-track {
        height: 8px;
        background: #ddd;
        border-radius: 4px;
      }

      .form-range::-moz-range-track {
        height: 8px;
        background: #ddd;
        border-radius: 4px;
      }

      .budget-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 5px;
      }

      .budget-label {
        font-size: 0.8rem;
        color: #666;
      }
      /* æ·»åŠ é¥¥é¥¿ç¨‹åº¦æ»‘å—çš„ç‰¹æ®Šæ ·å¼ */
      .hunger-labels {
        margin-top: 5px;
      }
      .hunger-labels span {
        width: 20px;
        text-align: center;
        font-size: 0.8rem;
        color: #666;
      }
      .hunger-text {
        margin-top: -5px;
      }
      .hunger-text small {
        flex: 1;
        text-align: center;
        font-size: 0.8rem;
        color: #ff7733;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header text-center">
        <h1>
          <span class="emoji">ğŸ¤¯</span> å¤§å­¦ç”Ÿåƒé¥­é€‰æ‹©å›°éš¾ç—‡æ‹¯æ•‘å™¨
          <span class="emoji">ğŸ”</span>
        </h1>
        <p class="lead">è¿˜åœ¨ä¸ºåƒä»€ä¹ˆå‘æ„ï¼Ÿè®©æœ¬ç¥å™¨æ‹¯æ•‘ä½ çš„é€‰æ‹©å›°éš¾ç—‡ï¼</p>
      </div>

      <div class="form-container">
        <h3 class="text-center mb-4">
          <span class="emoji">ğŸ”</span> å‘Šè¯‰æˆ‘ä½ çš„æƒ…å†µ
          <span class="emoji">ğŸ“</span>
        </h3>

        <div class="mb-3">
          <label for="budget" class="form-label">ğŸ’° ä»Šæ—¥é¢„ç®—ï¼ˆå…ƒï¼‰</label>
          <input
            type="range"
            class="form-range funny-input"
            min="0"
            max="50"
            step="1"
            id="budget"
            value="15"
          />
          <div class="budget-labels">
            <span class="budget-label">0å…ƒ</span>
            <span class="budget-label">10å…ƒ</span>
            <span class="budget-label">20å…ƒ</span>
            <span class="budget-label">30å…ƒ</span>
            <span class="budget-label">40å…ƒ</span>
            <span class="budget-label">50å…ƒ</span>
          </div>
          <p class="funny-fact">
            å½“å‰é¢„ç®—: <span id="budgetValue">15</span>å…ƒ
            <span class="emoji" id="budgetEmoji">ğŸ˜Š</span>
          </p>
        </div>

        <div class="mb-3">
          <label class="form-label">ğŸ˜Š ä»Šå¤©å¿ƒæƒ…å¦‚ä½•ï¼Ÿ</label>
          <div class="mood-selector text-center">
            <img
              src="https://cdn.jsdelivr.net/npm/twemoji@11.0.1/2/svg/1f62d.svg"
              data-mood="sad"
              alt="éš¾è¿‡"
            />
            <img
              src="https://cdn.jsdelivr.net/npm/twemoji@11.0.1/2/svg/1f614.svg"
              data-mood="depressed"
              alt="æŠ‘éƒ"
            />
            <img
              src="https://cdn.jsdelivr.net/npm/twemoji@11.0.1/2/svg/1f610.svg"
              data-mood="normal"
              alt="ä¸€èˆ¬"
            />
            <img
              src="https://cdn.jsdelivr.net/npm/twemoji@11.0.1/2/svg/1f60a.svg"
              data-mood="happy"
              alt="å¼€å¿ƒ"
            />
            <img
              src="https://cdn.jsdelivr.net/npm/twemoji@11.0.1/2/svg/1f60d.svg"
              data-mood="excited"
              alt="å…´å¥‹"
            />
          </div>
          <input type="hidden" id="mood" value="normal" />
        </div>

        <div class="mb-3">
          <label for="weather" class="form-label">â˜€ï¸ ä»Šå¤©å¤©æ°”</label>
          <select class="form-select funny-input" id="weather">
            <option value="sunny">é˜³å…‰æ˜åªš</option>
            <option value="cloudy">å¤šäº‘è½¬æ™´</option>
            <option value="rainy">é˜´é›¨ç»µç»µ</option>
            <option value="hot">çƒ­åˆ°èåŒ–</option>
            <option value="cold">å†·åˆ°å‘æŠ–</option>
            <option value="windy">ç‹‚é£å¤§ä½œ</option>
          </select>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="lastClass" class="form-label">ğŸ“š ä¸Šä¸€èŠ‚è¯¾</label>
            <select class="form-select funny-input" id="lastClass">
              <option value="none">æ²¡æœ‰è¯¾</option>
              <option value="math">é«˜æ•°/çº¿ä»£</option>
              <option value="physics">å¤§å­¦ç‰©ç†</option>
              <option value="programming">ç¼–ç¨‹è¯¾</option>
              <option value="english">è‹±è¯­è¯¾</option>
              <option value="philosophy">é©¬åŸ/æ¯›æ¦‚</option>
              <option value="experiment">å®éªŒè¯¾</option>
              <option value="pe">ä½“è‚²è¯¾</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="nextClass" class="form-label">ğŸ“– ä¸‹ä¸€èŠ‚è¯¾</label>
            <select class="form-select funny-input" id="nextClass">
              <option value="none">æ²¡æœ‰è¯¾</option>
              <option value="math">é«˜æ•°/çº¿ä»£</option>
              <option value="physics">å¤§å­¦ç‰©ç†</option>
              <option value="programming">ç¼–ç¨‹è¯¾</option>
              <option value="english">è‹±è¯­è¯¾</option>
              <option value="philosophy">é©¬åŸ/æ¯›æ¦‚</option>
              <option value="experiment">å®éªŒè¯¾</option>
              <option value="pe">ä½“è‚²è¯¾</option>
            </select>
          </div>
        </div>

        <div class="mb-3">
          <label for="hunger" class="form-label">ğŸ½ï¸ é¥¥é¥¿ç¨‹åº¦</label>
          <input
            type="range"
            class="form-range funny-input"
            min="1"
            max="10"
            id="hunger"
            value="5"
          />
          <div class="d-flex justify-content-between hunger-labels">
            <span>1</span>
            <span>2</span>
            <span>3</span>
            <span>4</span>
            <span>5</span>
            <span>6</span>
            <span>7</span>
            <span>8</span>
            <span>9</span>
            <span>10</span>
          </div>
          <div class="d-flex justify-content-between hunger-text">
            <small>é¥¿åˆ°å‡å¤©</small>
            <small>èƒ½åƒä¸€å¤´ç‰›</small>
            <small>æ­£å¸¸é¥¥é¥¿</small>
            <small>ä¸å¤ªé¥¿</small>
            <small>å®Œå…¨ä¸é¥¿</small>
          </div>
          <p class="funny-fact mt-2">
            å½“å‰çŠ¶æ€: <span id="hungerStatus">æ­£å¸¸é¥¥é¥¿</span>
            <span id="hungerEmoji">ğŸ˜‹</span>
          </p>
        </div>

        <div class="mb-3">
          <label for="energy" class="form-label">âš¡ èƒ½é‡éœ€æ±‚</label>
          <input
            type="range"
            class="form-range funny-input"
            min="1"
            max="10"
            id="energy"
            value="5"
          />
          <div class="d-flex justify-content-between">
            <span>åªæƒ³èººå¹³</span>
            <span>éœ€è¦æç¥</span>
            <span>æ­£å¸¸éœ€æ±‚</span>
            <span>æ´»åŠ›æ»¡æ»¡</span>
            <span>å‡†å¤‡è·‘é©¬æ‹‰æ¾</span>
          </div>
        </div>

        <div class="mb-3">
          <label for="special" class="form-label">ğŸ¯ ç‰¹æ®Šéœ€æ±‚</label>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="vegetarian"
              id="vegetarian"
            />
            <label class="form-check-label" for="vegetarian"
              >æˆ‘æ˜¯ç´ é£Ÿä¸»ä¹‰è€…</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="spicy"
              id="spicy"
            />
            <label class="form-check-label" for="spicy">æˆ‘æƒ³åƒè¾£çš„</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="quick"
              id="quick"
            />
            <label class="form-check-label" for="quick">æˆ‘è¦å¿«é€Ÿè§£å†³</label>
          </div>
        </div>

        <div class="text-center mt-4">
          <button id="generateBtn" class="btn funny-btn">
            <span class="emoji">âœ¨</span> ç”Ÿæˆæˆ‘çš„ä¸“å±ç¾é£Ÿ
            <span class="emoji">ğŸ½ï¸</span>
          </button>
        </div>
      </div>

      <div class="progress-container" id="progressContainer">
        <div class="progress">
          <div
            id="progressBar"
            class="progress-bar progress-bar-striped progress-bar-animated"
            role="progressbar"
            style="width: 0%"
          ></div>
        </div>
        <p class="text-center mt-2" id="progressText">
          æ­£åœ¨åˆ†æä½ çš„é€‰æ‹©å›°éš¾ç—‡ç¨‹åº¦...
        </p>
      </div>

      <div class="result-container" id="resultContainer">
        <h3 class="result-title text-center">
          <span class="emoji">ğŸ‰</span> ä½ çš„ä¸“å±ç¾é£Ÿæ¨è
          <span class="emoji">ğŸ´</span>
        </h3>
        <div class="text-center">
          <p class="result-food" id="resultFood">é»„ç„–é¸¡ç±³é¥­</p>
          <p id="resultReason" class="funny-fact">
            æ ¹æ®ä½ çš„é¢„ç®—15å…ƒã€å¿ƒæƒ…ä¸€èˆ¬å’Œå¤©æ°”é˜³å…‰æ˜åªšï¼Œè¿™é“èœæœ€é€‚åˆä½ ï¼
          </p>
          <p id="resultTip" class="funny-fact">
            å°è´´å£«ï¼šè®°å¾—åŠ ä»½ç±³é¥­ï¼Œä¸ç„¶ä¼šé¥¿ï¼
          </p>
          <button id="tryAgainBtn" class="btn funny-btn mt-3">
            <span class="emoji">ğŸ”„</span> å†è¯•ä¸€æ¬¡ <span class="emoji">ğŸ¤ª</span>
          </button>
        </div>
      </div>
    </div>

    <script>
      // é¢„ç®—æ»‘å—äº‹ä»¶
      document.getElementById("budget").addEventListener("input", function () {
        updateBudgetDisplay(this.value);
      });

      // æ›´æ–°é¢„ç®—æ˜¾ç¤ºçš„å‡½æ•°
      function updateBudgetDisplay(budget) {
        document.getElementById("budgetValue").textContent = budget;

        // æ ¹æ®é¢„ç®—æ”¹å˜è¡¨æƒ…
        let emoji = "ğŸ˜Š";
        if (budget < 5) emoji = "ğŸ˜±";
        else if (budget < 10) emoji = "ğŸ˜…";
        else if (budget > 30) emoji = "ğŸ’°";
        else if (budget > 40) emoji = "ğŸ¤‘";

        document.getElementById("budgetEmoji").textContent = emoji;
      }

      // å¿ƒæƒ…é€‰æ‹©å™¨äº‹ä»¶
      const moodImages = document.querySelectorAll(".mood-selector img");
      moodImages.forEach((img) => {
        img.addEventListener("click", function () {
          moodImages.forEach((i) => i.classList.remove("selected"));
          this.classList.add("selected");
          document.getElementById("mood").value = this.dataset.mood;
        });
      });

      // é»˜è®¤é€‰æ‹©"ä¸€èˆ¬"å¿ƒæƒ…
      moodImages[2].classList.add("selected");

      // é¥¥é¥¿ç¨‹åº¦æ»‘å—äº‹ä»¶
      document.getElementById("hunger").addEventListener("input", function () {
        const hunger = parseInt(this.value);
        let status = "";
        let emoji = "";

        if (hunger === 1) {
          status = "é¥¿åˆ°å‡å¤©";
          emoji = "ğŸ˜«";
        } else if (hunger <= 3) {
          status = "èƒ½åƒä¸€å¤´ç‰›";
          emoji = "ğŸ®";
        } else if (hunger <= 5) {
          status = "æœ‰ç‚¹é¥¿";
          emoji = "ğŸ˜‹";
        } else if (hunger <= 7) {
          status = "æ­£å¸¸é¥¥é¥¿";
          emoji = "ğŸ¤¤";
        } else if (hunger <= 9) {
          status = "ä¸å¤ªé¥¿";
          emoji = "ğŸ¤”";
        } else {
          status = "å®Œå…¨ä¸é¥¿";
          emoji = "ğŸ˜Œ";
        }

        document.getElementById("hungerStatus").textContent = status;
        document.getElementById("hungerEmoji").textContent = emoji;
      });

      // ç”ŸæˆæŒ‰é’®äº‹ä»¶
      document
        .getElementById("generateBtn")
        .addEventListener("click", function () {
          // ç¡®ä¿è·å–æœ€æ–°çš„è¡¨å•å€¼
          const currentBudget = document.getElementById("budget").value;
          updateBudgetDisplay(currentBudget);

          // æ˜¾ç¤ºè¿›åº¦æ¡
          document.getElementById("progressContainer").style.display = "block";
          document.querySelector(".form-container").style.display = "none";

          // æ¨¡æ‹Ÿè¿›åº¦æ¡
          let progress = 0;
          const progressBar = document.getElementById("progressBar");
          const progressText = document.getElementById("progressText");
          const interval = setInterval(() => {
            progress += Math.random() * 10;
            if (progress > 100) progress = 100;
            progressBar.style.width = progress + "%";

            // æ›´æ–°è¿›åº¦æ–‡æœ¬
            if (progress < 30) {
              progressText.textContent = "æ­£åœ¨åˆ†æä½ çš„é€‰æ‹©å›°éš¾ç—‡ç¨‹åº¦...";
            } else if (progress < 60) {
              progressText.textContent = "æ­£åœ¨è®¡ç®—é£Ÿå ‚æ’é˜Ÿæ—¶é—´...";
            } else if (progress < 90) {
              progressText.textContent = "æ­£åœ¨è€ƒè™‘å®¿ç®¡é˜¿å§¨çš„è„¸è‰²...";
            } else {
              progressText.textContent = "å·®ç‚¹è¢«å¤–å–å°å“¥æ‰“æ–­...";
            }

            if (progress === 100) {
              clearInterval(interval);
              setTimeout(showResult, 500);
            }
          }, 200);
        });

      // æ˜¾ç¤ºç»“æœ
      function showResult() {
        document.getElementById("progressContainer").style.display = "none";
        document.getElementById("resultContainer").style.display = "block";

        // è·å–æ‰€æœ‰è¾“å…¥å€¼ï¼ˆç¡®ä¿è·å–æœ€æ–°å€¼ï¼‰
        const budget = parseInt(document.getElementById("budget").value);
        const mood = document.getElementById("mood").value;
        const weather = document.getElementById("weather").value;
        const lastClass = document.getElementById("lastClass").value;
        const nextClass = document.getElementById("nextClass").value;
        const hunger = parseInt(document.getElementById("hunger").value);
        const energy = parseInt(document.getElementById("energy").value);
        const vegetarian = document.getElementById("vegetarian").checked;
        const spicy = document.getElementById("spicy").checked;
        const quick = document.getElementById("quick").checked;

        // æ ¹æ®æ¡ä»¶ç”Ÿæˆæ¨è
        const recommendation = generateRecommendation({
          budget,
          mood,
          weather,
          lastClass,
          nextClass,
          hunger,
          energy,
          vegetarian,
          spicy,
          quick,
        });

        // æ˜¾ç¤ºç»“æœ
        document.getElementById("resultFood").textContent = recommendation.food;
        document.getElementById("resultReason").textContent =
          recommendation.reason;
        document.getElementById("resultTip").textContent = recommendation.tip;

        // æ›´æ–°å®é™…èŠ±è´¹æ˜¾ç¤ºï¼ˆå¦‚æœæœ‰è¿™ä¸ªå…ƒç´ ï¼‰
        if (document.getElementById("actualPrice")) {
          document.getElementById("actualPrice").textContent =
            recommendation.price;
        }
      }

      // å†è¯•ä¸€æ¬¡æŒ‰é’®
      document
        .getElementById("tryAgainBtn")
        .addEventListener("click", function () {
          // éšè—ç»“æœå®¹å™¨
          document.getElementById("resultContainer").style.display = "none";
          // æ˜¾ç¤ºè¡¨å•å®¹å™¨
          document.querySelector(".form-container").style.display = "block";

          // ç¡®ä¿é¢„ç®—æ˜¾ç¤ºæ›´æ–°
          const currentBudget = document.getElementById("budget").value;
          updateBudgetDisplay(currentBudget);
        });

      // ç”Ÿæˆæ¨èç®—æ³• - å®Œæ•´æ”¹è¿›ç‰ˆ
      function generateRecommendation(params) {
        const {
          budget,
          mood,
          weather,
          lastClass,
          nextClass,
          hunger,
          energy,
          vegetarian,
          spicy,
          quick,
        } = params;

        // é£Ÿç‰©æ•°æ®åº“ - ä»·æ ¼èŒƒå›´ç‰ˆ
        const foods = [
          {
            name: "é£Ÿå ‚å¥—é¤",
            minPrice: 5,
            maxPrice: 10,
            mood: "normal",
            weather: "all",
            energy: 3,
            time: 1,
            veg: false,
            spicy: false,
          },
          {
            name: "é»„ç„–é¸¡ç±³é¥­",
            minPrice: 12,
            maxPrice: 18,
            mood: "normal",
            weather: "all",
            energy: 5,
            time: 2,
            veg: false,
            spicy: true,
          },
          {
            name: "éº»è¾£é¦™é”…",
            minPrice: 15,
            maxPrice: 25,
            mood: "happy",
            weather: "cold",
            energy: 7,
            time: 3,
            veg: true,
            spicy: true,
          },
          {
            name: "å…°å·æ‹‰é¢",
            minPrice: 10,
            maxPrice: 15,
            mood: "sad",
            weather: "cold",
            energy: 4,
            time: 2,
            veg: false,
            spicy: false,
          },
          {
            name: "æ²™å¿å°åƒ",
            minPrice: 8,
            maxPrice: 12,
            mood: "depressed",
            weather: "all",
            energy: 3,
            time: 1,
            veg: true,
            spicy: false,
          },
          {
            name: "è‚¯å¾·åŸº/éº¦å½“åŠ³",
            minPrice: 20,
            maxPrice: 30,
            mood: "happy",
            weather: "all",
            energy: 6,
            time: 1,
            veg: false,
            spicy: false,
          },
          {
            name: "é‡åº†å°é¢",
            minPrice: 10,
            maxPrice: 15,
            mood: "normal",
            weather: "all",
            energy: 5,
            time: 2,
            veg: false,
            spicy: true,
          },
          {
            name: "ç´ é£Ÿæ²™æ‹‰",
            minPrice: 15,
            maxPrice: 20,
            mood: "excited",
            weather: "hot",
            energy: 2,
            time: 1,
            veg: true,
            spicy: false,
          },
          {
            name: "ç…é¥¼æœå­",
            minPrice: 5,
            maxPrice: 8,
            mood: "normal",
            weather: "all",
            energy: 3,
            time: 1,
            veg: true,
            spicy: false,
          },
          {
            name: "ç…²ä»”é¥­",
            minPrice: 18,
            maxPrice: 25,
            mood: "happy",
            weather: "cold",
            energy: 7,
            time: 3,
            veg: false,
            spicy: false,
          },
          {
            name: "èºè›³ç²‰",
            minPrice: 12,
            maxPrice: 18,
            mood: "excited",
            weather: "cold",
            energy: 6,
            time: 2,
            veg: false,
            spicy: true,
          },
          {
            name: "å¯¿å¸",
            minPrice: 25,
            maxPrice: 35,
            mood: "happy",
            weather: "all",
            energy: 4,
            time: 2,
            veg: true,
            spicy: false,
          },
          {
            name: "ç‰›è‚‰é¢",
            minPrice: 15,
            maxPrice: 20,
            mood: "sad",
            weather: "cold",
            energy: 6,
            time: 2,
            veg: false,
            spicy: false,
          },
          {
            name: "ç‚’é¥­",
            minPrice: 10,
            maxPrice: 15,
            mood: "normal",
            weather: "all",
            energy: 5,
            time: 2,
            veg: true,
            spicy: true,
          },
          {
            name: "é¥ºå­",
            minPrice: 12,
            maxPrice: 18,
            mood: "happy",
            weather: "all",
            energy: 5,
            time: 2,
            veg: true,
            spicy: false,
          },
          {
            name: "æ±‰å ¡+å¯ä¹",
            minPrice: 18,
            maxPrice: 25,
            mood: "depressed",
            weather: "all",
            energy: 8,
            time: 1,
            veg: false,
            spicy: false,
          },
          {
            name: "éº»è¾£çƒ«",
            minPrice: 15,
            maxPrice: 20,
            mood: "happy",
            weather: "cold",
            energy: 6,
            time: 3,
            veg: true,
            spicy: true,
          },
          {
            name: "æ„å¤§åˆ©é¢",
            minPrice: 20,
            maxPrice: 30,
            mood: "excited",
            weather: "all",
            energy: 5,
            time: 3,
            veg: true,
            spicy: false,
          },
          {
            name: "çƒ¤å†·é¢",
            minPrice: 6,
            maxPrice: 10,
            mood: "normal",
            weather: "all",
            energy: 4,
            time: 1,
            veg: false,
            spicy: false,
          },
          {
            name: "ç‚¸é¸¡æ’",
            minPrice: 10,
            maxPrice: 15,
            mood: "happy",
            weather: "all",
            energy: 7,
            time: 1,
            veg: false,
            spicy: false,
          },
          {
            name: "æ³¡é¢+ç«è…¿è‚ ",
            minPrice: 3,
            maxPrice: 5,
            mood: "depressed",
            weather: "all",
            energy: 3,
            time: 1,
            veg: false,
            spicy: false,
          },
          {
            name: "é¢åŒ…+ç‰›å¥¶",
            minPrice: 2,
            maxPrice: 5,
            mood: "normal",
            weather: "all",
            energy: 2,
            time: 1,
            veg: true,
            spicy: false,
          },
          {
            name: "ç™½ç±³é¥­+å’¸èœ",
            minPrice: 0,
            maxPrice: 2,
            mood: "depressed",
            weather: "all",
            energy: 1,
            time: 1,
            veg: true,
            spicy: false,
          },
          {
            name: "é£Ÿå ‚å…è´¹æ±¤",
            minPrice: 0,
            maxPrice: 0,
            mood: "depressed",
            weather: "all",
            energy: 1,
            time: 1,
            veg: true,
            spicy: false,
          },
          {
            name: "é¦’å¤´+è±†æµ†",
            minPrice: 1,
            maxPrice: 3,
            mood: "normal",
            weather: "all",
            energy: 2,
            time: 1,
            veg: true,
            spicy: false,
          },
          {
            name: "ç…®é¸¡è›‹",
            minPrice: 1,
            maxPrice: 2,
            mood: "normal",
            weather: "all",
            energy: 2,
            time: 1,
            veg: false,
            spicy: false,
          },
          {
            name: "æ–¹ä¾¿é¢(è‡ªå¸¦)",
            minPrice: 0,
            maxPrice: 2,
            mood: "depressed",
            weather: "all",
            energy: 3,
            time: 1,
            veg: false,
            spicy: false,
          },
          {
            name: "æ°´æœæ‹¼ç›˜",
            minPrice: 5,
            maxPrice: 10,
            mood: "excited",
            weather: "hot",
            energy: 2,
            time: 1,
            veg: true,
            spicy: false,
          },
          {
            name: "å‡‰çš®",
            minPrice: 6,
            maxPrice: 10,
            mood: "happy",
            weather: "hot",
            energy: 3,
            time: 1,
            veg: true,
            spicy: true,
          },
        ];

        // è¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„é£Ÿç‰© - æ”¹è¿›ç‰ˆ
        let filteredFoods = foods
          .map((food) => {
            // è®¡ç®—å®é™…ä»·æ ¼ï¼ˆåœ¨minPriceå’ŒmaxPriceä¹‹é—´ï¼Œä¸è¶…è¿‡é¢„ç®—ï¼‰
            const price = Math.min(
              food.minPrice +
                Math.floor(Math.random() * (food.maxPrice - food.minPrice + 1)),
              budget
            );
            return { ...food, price };
          })
          .filter((food) => {
            return (
              food.price <= budget &&
              (!vegetarian || food.veg) &&
              (!spicy || food.spicy) &&
              (!quick || food.time <= 1)
            );
          });

        // å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„é£Ÿç‰©ï¼Œæ”¾å®½æ¡ä»¶
        if (filteredFoods.length === 0) {
          filteredFoods = foods
            .map((food) => {
              const price = Math.min(food.minPrice, budget);
              return { ...food, price };
            })
            .filter((food) => food.price <= budget);
        }

        // æ ¹æ®å¿ƒæƒ…å’Œå¤©æ°”è¿›ä¸€æ­¥ç­›é€‰
        if (mood === "sad" || mood === "depressed") {
          filteredFoods = filteredFoods.filter(
            (food) =>
              food.mood === "sad" ||
              food.mood === "depressed" ||
              food.mood === "normal"
          );
        } else if (mood === "happy" || mood === "excited") {
          filteredFoods = filteredFoods.filter(
            (food) => food.mood === "happy" || food.mood === "excited"
          );
        }

        if (weather === "hot") {
          filteredFoods = filteredFoods.filter(
            (food) => !["éº»è¾£é¦™é”…", "éº»è¾£çƒ«"].includes(food.name)
          );
        } else if (weather === "cold") {
          filteredFoods.sort((a, b) => b.energy - a.energy);
        }

        // æ ¹æ®é¥¥é¥¿ç¨‹åº¦å’Œèƒ½é‡éœ€æ±‚è°ƒæ•´
        if (hunger >= 7) {
          filteredFoods.sort((a, b) => b.energy - a.energy);
        } else if (hunger <= 3) {
          filteredFoods.sort((a, b) => a.energy - b.energy);
        }

        if (energy >= 7) {
          filteredFoods.sort((a, b) => b.energy - a.energy);
        } else if (energy <= 3) {
          filteredFoods.sort((a, b) => a.energy - b.energy);
        }

        // æ ¹æ®è¯¾ç¨‹è°ƒæ•´
        if (lastClass === "math" || lastClass === "physics") {
          filteredFoods = filteredFoods.filter((food) => food.energy > 2);
        }

        if (nextClass === "pe") {
          filteredFoods = filteredFoods.filter((food) => food.time <= 1);
        }

        // éšæœºé€‰æ‹©ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„é£Ÿç‰©
        const selectedFood =
          filteredFoods[Math.floor(Math.random() * filteredFoods.length)];

        // ç”ŸæˆåŸå› å’Œæç¤º
        let reason = `æ ¹æ®ä½ çš„é¢„ç®—${budget}å…ƒï¼ˆå®é™…èŠ±è´¹${
          selectedFood.price
        }å…ƒï¼‰ã€å¿ƒæƒ…${getMoodText(mood)}å’Œå¤©æ°”${getWeatherText(weather)}`;
        if (hunger >= 7) reason += "ä»¥åŠé¥¿åˆ°èƒ½åƒä¸‹ä¸€å¤´ç‰›çš„çŠ¶æ€";
        if (energy >= 7) reason += "å’Œé«˜èƒ½é‡éœ€æ±‚";
        reason += `ï¼Œ${selectedFood.name}æœ€é€‚åˆä½ ï¼`;

        let tip = "å°è´´å£«ï¼š";
        if (selectedFood.price >= budget - 2 && budget > 0) {
          tip += "è¿™ä¸ªé€‰æ‹©æœ‰ç‚¹è¶…å‡ºé¢„ç®—ï¼Œè€ƒè™‘å°‘åƒç‚¹é›¶é£Ÿå§ï¼";
        } else if (selectedFood.price <= 3) {
          tip += "è¿™ä¹ˆçœï¼Ÿå»ºè®®ä½ æ‰¾çˆ¸å¦ˆè¦ç‚¹ç”Ÿæ´»è´¹ï¼";
        } else if (selectedFood.price <= budget - 10) {
          tip += "çœä¸‹çš„é’±å¯ä»¥ä¹°æ¯å¥¶èŒ¶çŠ’åŠ³è‡ªå·±ï¼";
        } else if (selectedFood.spicy) {
          tip += "è¾£çš„é£Ÿç‰©å¯ä»¥æå‡å¿ƒæƒ…ï¼Œä½†è®°å¾—å¤‡å¥½çº¸å·¾ï¼";
        } else if (selectedFood.veg) {
          tip += "ç´ é£Ÿå¥åº·ï¼Œä½†è®°å¾—è¡¥å……è›‹ç™½è´¨å“¦ï¼";
        } else {
          tip += "å¥½å¥½äº«å—ä½ çš„ç¾é£Ÿå§ï¼";
        }

        return {
          food: selectedFood.name,
          price: selectedFood.price,
          reason: reason,
          tip: tip,
        };
      }

      // è¾…åŠ©å‡½æ•°ï¼šè·å–å¿ƒæƒ…æ–‡æœ¬
      function getMoodText(mood) {
        const moods = {
          sad: "éš¾è¿‡",
          depressed: "æŠ‘éƒ",
          normal: "ä¸€èˆ¬",
          happy: "å¼€å¿ƒ",
          excited: "å…´å¥‹",
        };
        return moods[mood] || "ä¸€èˆ¬";
      }

      // è¾…åŠ©å‡½æ•°ï¼šè·å–å¤©æ°”æ–‡æœ¬
      function getWeatherText(weather) {
        const weathers = {
          sunny: "é˜³å…‰æ˜åªš",
          cloudy: "å¤šäº‘è½¬æ™´",
          rainy: "é˜´é›¨ç»µç»µ",
          hot: "çƒ­åˆ°èåŒ–",
          cold: "å†·åˆ°å‘æŠ–",
          windy: "ç‹‚é£å¤§ä½œ",
        };
        return weathers[weather] || "ä¸€èˆ¬";
      }

      // åˆå§‹åŒ–é¢„ç®—æ˜¾ç¤º
      updateBudgetDisplay(document.getElementById("budget").value);
    </script>
  </body>
</html>
